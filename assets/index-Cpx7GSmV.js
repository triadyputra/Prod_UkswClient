import{f as g}from"./dateUtils-CBqjUJMf.js";import{c as T,_ as R,V as B,a as P}from"./VDataTableServer-C6j2rVpb.js";import{_ as $}from"./AppTextField.vue_vue_type_script_setup_true_lang-DalNiF3C.js";import{u as x}from"./useApi-Dfvd1Z7D.js";import{V as O}from"./VCard-DC7sarKj.js";import{V as z}from"./VSpacer-BIv-aZxl.js";import{d as E,r as v,az as j,aA as q,X as h,c as F,b as r,f as n,o as Y,e as _,a2 as m,m as o,a0 as G,t as u,v as y}from"./index-DAYkNofL.js";import{V as Q}from"./VDivider-CodweeG_.js";import"./VTextField-VwHbuY-M.js";import"./VImg-zFWb-7i9.js";import"./forwardRefs-B931MWyl.js";import"./index-C4wfZp0O.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./VList-DCv2oWet.js";import"./VAvatar-Dn9Rcf28.js";import"./VOverlay-DzCb3nrx.js";import"./VMenu-I3MpI4zS.js";import"./VChip-rKZjXsAV.js";import"./VCardText-CU90L5Og.js";/* empty css              */const X={class:"d-flex flex-wrap gap-4 ma-6"},H={class:"d-flex align-center"},I={class:"d-flex gap-4 flex-wrap align-center"},ye=E({__name:"index",async setup(J){let f,N;const A=[{title:"Kode",key:"KodeYayasan",sortable:!1,width:"15%"},{title:"Nama",key:"NamaYayasan",sortable:!1,width:"65%"},{title:"Total",key:"Total",sortable:!1,width:"15%",align:"end"},{title:"Debet",key:"Debet",sortable:!1,width:"15%",align:"end"},{title:"Kredit",key:"Kredit",sortable:!1,width:"15%",align:"end"},{title:"Saldo",key:"Saldo",sortable:!1,width:"15%",align:"end"}],i=v(""),w=v([]),l=v(10),s=v(1),C=j({filter:i,page:s,pageSize:l}),{data:k,execute:M}=([f,N]=q(()=>x(T("/api/Laporan/GetLaporanKonsolidasi",{query:C}))),f=await f,N(),f),K=h(()=>{var t;return((t=k.value)==null?void 0:t.Data)??[]}),D=h(()=>{var t;return((t=k.value)==null?void 0:t.TotalCount)??10});async function L(){var t;try{const a=`/api/Laporan/export-konsolidasi?periode=${i.value}`,p=await x(a),c=(t=p==null?void 0:p.data)==null?void 0:t.value.fileBase64;console.log("Respon Data COA:",c);const d=atob(c),e=new Uint8Array(d.length);for(let b=0;b<d.length;b++)e[b]=d.charCodeAt(b);const S=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),U=URL.createObjectURL(S),V=document.createElement("a");V.href=U,V.download=`Laporan_Konsolidasi_${i.value}.xlsx`,V.click(),URL.revokeObjectURL(U)}catch(a){console.error("âŒ Error Fetch COA:",a)}}return(t,a)=>{const p=$,c=R,d=P;return Y(),F("div",null,[r(O,{title:"Laporan Konsolidasi",class:"mb-6"},{default:n(()=>[_("div",X,[_("div",H,[r(p,{modelValue:o(i),"onUpdate:modelValue":a[0]||(a[0]=e=>m(i)?i.value=e:null),placeholder:"Cari Data",style:{"inline-size":"200px"},class:"me-3"},null,8,["modelValue"])]),r(z),_("div",I,[r(c,{modelValue:o(l),"onUpdate:modelValue":a[1]||(a[1]=e=>m(l)?l.value=e:null),items:[5,10,20,25,50]},null,8,["modelValue"]),r(G,{color:"primary","prepend-icon":"tabler-file-upload",onClick:a[2]||(a[2]=()=>L())},{default:n(()=>a[7]||(a[7]=[u(" Download ")])),_:1,__:[7]})])]),r(Q,{class:"mt-4"}),r(B,{"items-per-page":o(l),"onUpdate:itemsPerPage":a[4]||(a[4]=e=>m(l)?l.value=e:null),"model-value":o(w),"onUpdate:modelValue":a[5]||(a[5]=e=>m(w)?w.value=e:null),page:o(s),"onUpdate:page":a[6]||(a[6]=e=>m(s)?s.value=e:null),headers:A,items:o(K),"items-length":o(D),class:"text-no-wrap"},{"item.Total":n(({item:e})=>[u(y(("formatNumber"in t?t.formatNumber:o(g))(e.Total)),1)]),"item.Debet":n(({item:e})=>[u(y(("formatNumber"in t?t.formatNumber:o(g))(e.Debet)),1)]),"item.Kredit":n(({item:e})=>[u(y(("formatNumber"in t?t.formatNumber:o(g))(e.Kredit)),1)]),"item.Saldo":n(({item:e})=>[u(y(("formatNumber"in t?t.formatNumber:o(g))(e.Saldo)),1)]),bottom:n(()=>[r(d,{page:o(s),"onUpdate:page":a[3]||(a[3]=e=>m(s)?s.value=e:null),"items-per-page":o(l),"total-items":o(D)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","model-value","page","items","items-length"])]),_:1})])}}});export{ye as default};
