import{a5 as E,a6 as S,r as R,a9 as q,b as C,ac as A,b2 as $,ad as H}from"./index-CfGr7fxM.js";import{h as j,i as F}from"./VTextField-md1QIUMW.js";import{f as k}from"./forwardRefs-B931MWyl.js";import{a as v,w as P,c as D,C as b}from"./index-C4wfZp0O.js";const O=S({...A(),...F()},"VForm"),se=E()({name:"VForm",props:O(),emits:{"update:modelValue":o=>!0,submit:o=>!0},setup(o,r){let{slots:t,emit:f}=r;const c=j(o),a=R();function u(n){n.preventDefault(),c.reset()}function s(n){const p=n,e=c.validate();p.then=e.then.bind(e),p.catch=e.catch.bind(e),p.finally=e.finally.bind(e),f("submit",p),p.defaultPrevented||e.then(d=>{var i;let{valid:y}=d;y&&((i=a.value)==null||i.submit())}),p.preventDefault()}return q(()=>{var n;return C("form",{ref:a,class:["v-form",o.class],style:o.style,novalidate:!0,onReset:u,onSubmit:s},[(n=t.default)==null?void 0:n.call(t,c)])}),k(c,a)}});class V extends Error{constructor(r,t){super(r,t),this.name="FetchError",t!=null&&t.cause&&!this.cause&&(this.cause=t.cause)}}function _(o){var n,p,e,d,y;const r=((n=o.error)==null?void 0:n.message)||((p=o.error)==null?void 0:p.toString())||"",t=((e=o.request)==null?void 0:e.method)||((d=o.options)==null?void 0:d.method)||"GET",f=((y=o.request)==null?void 0:y.url)||String(o.request)||"/",c=`[${t}] ${JSON.stringify(f)}`,a=o.response?`${o.response.status} ${o.response.statusText}`:"<no response>",u=`${c}: ${a}${r?` ${r}`:""}`,s=new V(u,o.error?{cause:o.error}:void 0);for(const i of["request","options","response"])Object.defineProperty(s,i,{get(){return o[i]}});for(const[i,h]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(s,i,{get(){return o.response&&o.response[h]}});return s}const B=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function w(o="GET"){return B.has(o.toUpperCase())}function J(o){if(o===void 0)return!1;const r=typeof o;return r==="string"||r==="number"||r==="boolean"||r===null?!0:r!=="object"?!1:Array.isArray(o)?!0:o.buffer?!1:o.constructor&&o.constructor.name==="Object"||typeof o.toJSON=="function"}const M=new Set(["image/svg","application/xml","application/xhtml","application/html"]),N=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function U(o=""){if(!o)return"json";const r=o.split(";").shift()||"";return N.test(r)?"json":M.has(r)||r.startsWith("text/")?"text":"blob"}function L(o,r,t,f){const c=z((r==null?void 0:r.headers)??(o==null?void 0:o.headers),t==null?void 0:t.headers,f);let a;return(t!=null&&t.query||t!=null&&t.params||r!=null&&r.params||r!=null&&r.query)&&(a={...t==null?void 0:t.params,...t==null?void 0:t.query,...r==null?void 0:r.params,...r==null?void 0:r.query}),{...t,...r,query:a,params:a,headers:c}}function z(o,r,t){if(!r)return new t(o);const f=new t(r);if(o)for(const[c,a]of Symbol.iterator in o||Array.isArray(o)?o:new t(o))f.set(c,a);return f}async function m(o,r){if(r)if(Array.isArray(r))for(const t of r)await t(o);else await r(o)}const K=new Set([408,409,425,429,500,502,503,504]),G=new Set([101,204,205,304]);function g(o={}){const{fetch:r=globalThis.fetch,Headers:t=globalThis.Headers,AbortController:f=globalThis.AbortController}=o;async function c(s){const n=s.error&&s.error.name==="AbortError"&&!s.options.timeout||!1;if(s.options.retry!==!1&&!n){let e;typeof s.options.retry=="number"?e=s.options.retry:e=w(s.options.method)?0:1;const d=s.response&&s.response.status||500;if(e>0&&(Array.isArray(s.options.retryStatusCodes)?s.options.retryStatusCodes.includes(d):K.has(d))){const y=typeof s.options.retryDelay=="function"?s.options.retryDelay(s):s.options.retryDelay||0;return y>0&&await new Promise(i=>setTimeout(i,y)),a(s.request,{...s.options,retry:e-1})}}const p=_(s);throw Error.captureStackTrace&&Error.captureStackTrace(p,a),p}const a=async function(n,p={}){const e={request:n,options:L(n,p,o.defaults,t),response:void 0,error:void 0};e.options.method&&(e.options.method=e.options.method.toUpperCase()),e.options.onRequest&&await m(e,e.options.onRequest),typeof e.request=="string"&&(e.options.baseURL&&(e.request=v(e.request,e.options.baseURL)),e.options.query&&(e.request=P(e.request,e.options.query),delete e.options.query),"query"in e.options&&delete e.options.query,"params"in e.options&&delete e.options.params),e.options.body&&w(e.options.method)&&(J(e.options.body)?(e.options.body=typeof e.options.body=="string"?e.options.body:JSON.stringify(e.options.body),e.options.headers=new t(e.options.headers||{}),e.options.headers.has("content-type")||e.options.headers.set("content-type","application/json"),e.options.headers.has("accept")||e.options.headers.set("accept","application/json")):("pipeTo"in e.options.body&&typeof e.options.body.pipeTo=="function"||typeof e.options.body.pipe=="function")&&("duplex"in e.options||(e.options.duplex="half")));let d;if(!e.options.signal&&e.options.timeout){const i=new f;d=setTimeout(()=>{const h=new Error("[TimeoutError]: The operation was aborted due to timeout");h.name="TimeoutError",h.code=23,i.abort(h)},e.options.timeout),e.options.signal=i.signal}try{e.response=await r(e.request,e.options)}catch(i){return e.error=i,e.options.onRequestError&&await m(e,e.options.onRequestError),await c(e)}finally{d&&clearTimeout(d)}if((e.response.body||e.response._bodyInit)&&!G.has(e.response.status)&&e.options.method!=="HEAD"){const i=(e.options.parseResponse?"json":e.options.responseType)||U(e.response.headers.get("content-type")||"");switch(i){case"json":{const h=await e.response.text(),T=e.options.parseResponse||$;e.response._data=T(h);break}case"stream":{e.response._data=e.response.body||e.response._bodyInit;break}default:e.response._data=await e.response[i]()}}return e.options.onResponse&&await m(e,e.options.onResponse),!e.options.ignoreResponseError&&e.response.status>=400&&e.response.status<600?(e.options.onResponseError&&await m(e,e.options.onResponseError),await c(e)):e.response},u=async function(n,p){return(await a(n,p))._data};return u.raw=a,u.native=(...s)=>r(...s),u.create=(s={},n={})=>g({...o,...n,defaults:{...o.defaults,...n.defaults,...s}}),u}const l=(function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")})(),I=l.fetch?(...o)=>l.fetch(...o):()=>Promise.reject(new Error("[ofetch] global.fetch is not supported!")),X=l.Headers,Q=l.AbortController,W=g({fetch:I,Headers:X,AbortController:Q});async function Y(o,r){if(typeof window>"u"){const t=D.createHmac("sha256",r);return t.update(o),t.digest("hex")}else return b.HmacSHA256(o,r).toString(b.enc.Hex)}async function Z(o){const r=Math.floor(Date.now()/1e3).toString(),t=await Y(r,o);return{kode:r,signature:t}}async function x(o){const r="E542C4GS287CD5931069B433E695F4F2",{kode:t,signature:f}=await Z(r);if(o.headers||(o.headers=new Headers),!(o.headers instanceof Headers)){const c=new Headers;Object.entries(o.headers).forEach(([a,u])=>c.append(a,u)),o.headers=c}o.headers.append("X-Kode",t),o.headers.append("X-Signature",f)}const ne=W.create({baseURL:"http://157.66.34.74:91",async onRequest({options:o}){const r=H("accessToken").value;r&&o.headers.append("Authorization",`Bearer ${r}`),await x(o)}});export{ne as $,se as V};
