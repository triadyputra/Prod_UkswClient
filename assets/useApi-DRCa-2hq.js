import{c as u,C as c}from"./index-C4wfZp0O.js";import{bN as n,b2 as h,ad as i}from"./index-BNa8Zz1m.js";async function p(e,r){if(typeof window>"u"){const t=u.createHmac("sha256",r);return t.update(e),t.digest("hex")}else return c.HmacSHA256(e,r).toString(c.enc.Hex)}async function d(e){const r=Math.floor(Date.now()/1e3).toString(),t=await p(r,e);return{kode:r,signature:t}}const l="https://localhost:7146",y=n({baseUrl:l,fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const r=i("accessToken").value,t="E542C4GS287CD5931069B433E695F4F2",{kode:o,signature:s}=await d(t);e.headers||(e.headers={});const a=e.headers;return a.Accept="application/json",a["X-Kode"]=o,a["X-Signature"]=s,r&&(a.Authorization=`Bearer ${r}`),e.headers=a,{options:e}},afterFetch(e){const{data:r,response:t}=e;let o=null;try{o=h(r)}catch(s){console.error("❌ JSON parse error:",s)}return{data:o,response:t}},onFetchError(e){return console.error("❌ Fetch error:",e.error),e}}});n({baseUrl:"/api",fetchOptions:{headers:{Accept:"application/json"}},options:{refetch:!0,async beforeFetch({options:e}){const r=i("accessToken").value,t="E542C4GS287CD5931069B433E695F4F2",{kode:o,signature:s}=await d(t);e.headers||(e.headers={});const a=e.headers;return a.Accept="application/json",a["X-Kode"]=o,a["X-Signature"]=s,r&&(a.Authorization=`Bearer ${r}`),e.headers=a,{options:e}},afterFetch(e){const{data:r,response:t}=e;let o=null;try{o=h(r)}catch(s){console.error("❌ JSON parse error:",s)}return{data:o,response:t}},onFetchError(e){return console.error("❌ Fetch error:",e.error),e}}});export{y as u};
